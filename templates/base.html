<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kristina Saric | Systems Architecture & AI</title>
    
    <!-- PRE-FLIGHT THEME LOGIC (Must stay here to prevent flash) -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.documentElement.setAttribute('data-theme', 'dark');
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>

    <!-- 1. The Structure -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- 2. The Code Syntax -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/syntax.css') }}">
    
    <!-- 3. The Article Overrides (Wins the Cascade) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/markdown.css') }}">
</head>
<body>

    <button class="theme-toggle" id="theme-btn" aria-label="Toggle Dark Mode">Mode</button>

<div class="layout-wrapper">
    
    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div style="margin-bottom: 20px;">
            <div class="logo-box">K.</div>
        </div>

        <a href="/" class="author-name">Kristina Saric</a>
        <div class="author-bio">
            Independent research on adaptive educational systems, computational intelligence, and civil infrastructure.
        </div>

        {% if toc %}
            <!-- ARTICLE NAV -->
            <div class="nav-section">
                <div class="nav-title">On This Page</div>
                <div style="font-size: 0.85rem; color: var(--meta-color); line-height: 1.4;">
                    {{ toc|safe }}
                </div>
            </div>
            
            <div class="nav-section" style="margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                <a href="/{{ category }}" class="nav-link">&larr; Back to {{ category|title }}</a>
                <a href="/" class="nav-link" style="margin-top: 5px;">&larr; Index</a>
            </div>

        {% else %}
            <!-- MAIN NAV -->
            <div class="nav-section">
                <div class="nav-title">Index</div>
                <div class="nav-item-container">
                    <a href="/" class="nav-link" style="color: var(--text-color); font-weight: bold;">All Updates</a>
                </div>
                
                {% for cat in categories %}
                    <div class="nav-item-container">
                        <a href="/{{ cat.slug }}" class="nav-link">{{ cat.title }}</a>
                        <div class="nav-desc">{{ cat.desc }}</div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </aside>

    <!-- CONTENT -->
    <main class="main-content">
        {% block content %}{% endblock %}
        
        <div style="margin-top: 60px; font-size: 0.8rem; color: var(--meta-color); border-top: 1px solid var(--border-color); padding-top: 20px;">
            &copy; 2025 Kristina Saric. <br>Built on The Citadel v1.0.
        </div>
    </main>

</div>

<!-- TOGGLE INTERACTIVITY -->
<script>
    const themeBtn = document.getElementById('theme-btn');
    const htmlEl = document.documentElement;

    function updateButtonText() {
        const currentTheme = htmlEl.getAttribute('data-theme');
        themeBtn.innerText = currentTheme === 'dark' ? 'Light Mode' : 'Dark Mode';
    }
    updateButtonText();

    themeBtn.addEventListener('click', () => {
        const currentTheme = htmlEl.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        htmlEl.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateButtonText();
    });
</script>

</body>
</html>